# Force a VM instead of Docker, some tests that depend on the FS fail otherwise
sudo: required

language: node_js
node_js:
- node
- '8'
- '6'

# https://docs.travis-ci.com/user/customizing-the-build/#Fast-Finishing
matrix:
  fast_finish: true

install:
- npm ci
- lerna exec "npm ci"

script:
- npm test -- --coverage --verbose --ci

# Disabling because danger seems broken atm?
# after_script:
# - npm run danger

# keep the npm cache around to speed up installs
cache:
  directories:
  - "$HOME/.npm"
